<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Paskal">
<title>intro_to_paskal • Paskal</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="intro_to_paskal">
<meta property="og:description" content="Paskal">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Paskal</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/intro_to_paskal.html">intro_to_paskal</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>intro_to_paskal</h1>
            
      
      
      <div class="d-none name"><code>intro_to_paskal.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">Paskal</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The Paskal package was designed to assist performance auditors, among
others, with some useful calculations related to statistical sampling.
This set of use cases allows to quickly and easily understand how to use
the library.</p>
<p>The main functions enable the calculation of the sample size ‘n’, the
sampling error ‘e’, or the confidence interval ‘c’; to estimate the
proportion ‘p’, the mean ‘x’, or the total ‘t’; through simple random
sampling plans ‘srs’, systematic ‘sys’, or stratified ‘sts’.</p>
<p>The names of the functions follow this logic, with one option per
category. To calculate the sampling error for the estimation of the mean
using systematic sampling, for example, the function would be ‘e’
(sampling error), ‘x’ (mean) and ‘sys’ -separated by a underscore- (for
systematic sampling), resulting in ‘ex_sys’.</p>
<p>In this introductory section, we will present three use cases for the
most basic functions in the package: np_srs, ep_srs and cp_srs.</p>
</div>
<div class="section level2">
<h2 id="use-case-1-sample-size-calculation">Use Case 1: Sample size calculation<a class="anchor" aria-label="anchor" href="#use-case-1-sample-size-calculation"></a>
</h2>
<p>Before proceeding with the case study, it is important to understand
the function and its parameters. This can be achieved by using the
‘help’ command, which provides detailed information about the function
in question.</p>
<p>Usage:<br> np_srs(C, e, p_exp = 0.5, N = Inf)</p>
<p>Arguments:<br> C: Level of confidence. (0 &lt;= C &lt;= 1)<br> e:
Sampling error. (0 &lt;= e &lt;= 1)<br> p_exp: Expected proportion in
the population. By default, the value is 0.5, which is also applicable
if you lack information (0 &lt;= p_exp &lt;= 1).<br> N: A positive
integer indicating the number of elements in the population. By default,
the value is infinite.<br></p>
<p>Note that the function requires two mandatory arguments: the
confidence level ‘C’ and the sampling error ‘e’; and two arguments that,
because they have predetermined values, are optional: the expected
proportion ‘p_exp’ and the population size ‘N’.</p>
<p>Case Study: Consider the need to determine the proportion of salary
settlements from the previous month affected by calculation errors. This
would entail surveying all settlements, which would be an arduous and
expensive undertaking. The reason for this is that it would involve
manually recalculating the settlement of each of the company’s
employees, which we are going to assume amounts to 5,000. Due to the
characteristics of the population, where it is possible to identify each
of the settlements, and as we will assume that it is not necessary to
have disaggregated information, the proportion will be estimated through
simple random sampling.</p>
<p>We choose a confidence level of 95% (meaning that there is a 95%
probability of the sample being representative) and a maximum
discrepancy between the estimator and the parameter - or sampling error
- of 0.1. Finally, if this is the first time the analysis is being
carried out, we cannot know the expected value of the p-estimator (we
may find that 10%, 20%, 50% or more of the settlements have calculation
errors).</p>
<p>Given that the expected value is unknown, the most conservative
decision is made, the one that makes the sample size relatively larger,
which implies p_exp = 0.5 (precisely, the default value of the
argument). With this information, we can now calculate the sample size.
The R code could be as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sample size needed to estimate the proportion with a Simple Random Sampling plan</span></span>
<span></span>
<span><span class="co"># Arguments</span></span>
<span><span class="va">C</span> <span class="op">&lt;-</span> <span class="fl">0.95</span> <span class="co"># Level of confidence</span></span>
<span><span class="va">e</span> <span class="op">&lt;-</span> <span class="fl">0.1</span> <span class="co"># Sampling error</span></span>
<span><span class="va">N</span> <span class="op">&lt;-</span> <span class="fl">5000</span> <span class="co"># Population size</span></span>
<span></span>
<span><span class="co"># Function</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/np_srs.html">np_srs</a></span><span class="op">(</span>C <span class="op">=</span> <span class="va">C</span>, e <span class="op">=</span> <span class="va">e</span>, N <span class="op">=</span> <span class="va">N</span><span class="op">)</span> <span class="co"># Call the function</span></span>
<span></span>
<span><span class="co"># Output</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Sample size:"</span>,<span class="va">n</span>,<span class="st">"settlements"</span><span class="op">)</span><span class="op">)</span> <span class="co"># Print the resulting sampling size</span></span>
<span><span class="co">#&gt; [1] "Sample size: 95 settlements"</span></span></code></pre></div>
<p>The function indicates that we will have to analyze 95 settlements to
estimate the proportion with 95% confidence and a sampling error of +/-
0.1.</p>
</div>
<div class="section level2">
<h2 id="use-case-2-sampling-error-calculation">Use case 2: Sampling error calculation<a class="anchor" aria-label="anchor" href="#use-case-2-sampling-error-calculation"></a>
</h2>
<p>In this case, the sampling error will be calculated when estimating
the proportion through simple random sampling, an issue that is resolved
by the ‘ep_srs’ function.</p>
<p>This is a common situation when the sample size is given. Instead of
choosing the sampling error that we are willing to admit, which results
in a certain sample size, the sample size is chosen, leaving the
sampling error as the dependent variable. This happens when there is an
urgent need, a limited window of opportunity, a fixed and predetermined
analysis capacity, or when it is difficult or dysfunctional to calculate
the sample size in advance. We will take advantage of reversing the
previous use case so that the example is intuitive.</p>
<p>Consider a scenario where 95 out of 5,000 settlements are randomly
selected and analyzed. What would be the sampling error in this case,
assuming a confidence level of 95%? We might expect the result to be
similar to the prior sampling error of 0.1 observed in case 1. Now we
will use the R code to perform the calculation. <br></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sampling error when estimating the proportion with a Simple Random Sampling plan</span></span>
<span></span>
<span><span class="co"># Arguments</span></span>
<span><span class="va">C</span> <span class="op">&lt;-</span> <span class="fl">0.95</span> <span class="co"># Level of confidence</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">95</span> <span class="co"># Sample size</span></span>
<span><span class="va">N</span> <span class="op">&lt;-</span> <span class="fl">5000</span> <span class="co"># Population size</span></span>
<span></span>
<span><span class="co"># Function</span></span>
<span><span class="va">e</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ep_srs.html">ep_srs</a></span><span class="op">(</span>C <span class="op">=</span> <span class="va">C</span>, n <span class="op">=</span> <span class="va">n</span>, N <span class="op">=</span> <span class="va">N</span><span class="op">)</span> <span class="co"># Call the function</span></span>
<span></span>
<span><span class="co"># Output</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Rounded samplig error:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">e</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># Print the rounded sampling error</span></span>
<span><span class="co">#&gt; [1] "Rounded samplig error: 0.1"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Samplig error:"</span>, <span class="va">e</span><span class="op">)</span><span class="op">)</span> <span class="co"># Print the rounded sampling error</span></span>
<span><span class="co">#&gt; [1] "Samplig error: 0.0996062809217289"</span></span></code></pre></div>
<p>Note that the unrounded sampling error gives a decimal number that is
very close, but is not equal, to our sampling error of 0.1. This is
because the sample sizes must be whole numbers, with the exact, but
inapplicable, sample size returned by the function being rounded up. In
fact, if in the previous function we could enter the exact sample size
prior to rounding, then we would obtain the exact previously defined
sampling error.</p>
</div>
<div class="section level2">
<h2 id="use-case-3-confidence-interval-calculation">Use Case 3: Confidence interval calculation<a class="anchor" aria-label="anchor" href="#use-case-3-confidence-interval-calculation"></a>
</h2>
<p>In this use case, the confidence interval of the estimated proportion
will be calculated through simple random sampling. This issue is
resolved using the ‘cp_srs’ function.</p>
<p>Whether we choose sampling error to get the sample size (case 1) or
the other way round (case 2), is irrelevant. Ultimately, we will have an
estimation of the proportion ‘p_est’. With this data and other relevant
information, we can build a confidence interval to make inferences about
the population.</p>
<p>For example, after analyzing 95 randomly chosen settlements, let’s
suppose that 29 of them were found to have incorrect calculations,
resulting in an estimated proportion of approximately 0.3. It should be
noted that this function includes arguments that were not present in the
previous ones, such as ‘n_real’ (the real sample size) and ‘p_est’, the
estimated proportion. It is important to be aware that this number may
differ from the expected proportion ‘p_exp’. <br></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Confidence interval of the proportion under a Simple Random Sampling framework</span></span>
<span></span>
<span><span class="co"># Arguments</span></span>
<span><span class="va">C</span> <span class="op">&lt;-</span> <span class="fl">0.95</span> <span class="co"># Level of confidence</span></span>
<span><span class="va">n_real</span> <span class="op">&lt;-</span> <span class="fl">95</span> <span class="co"># Real sample size</span></span>
<span><span class="va">N</span> <span class="op">&lt;-</span> <span class="fl">5000</span> <span class="co"># Population size</span></span>
<span><span class="va">e</span> <span class="op">&lt;-</span> <span class="fl">0.1</span> <span class="co"># Sampling error</span></span>
<span><span class="va">p_est</span> <span class="op">&lt;-</span> <span class="fl">0.3</span> <span class="co"># Sample estimator value</span></span>
<span></span>
<span><span class="co"># Function</span></span>
<span><span class="va">ic</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cp_srs.html">cp_srs</a></span><span class="op">(</span>C <span class="op">=</span> <span class="va">C</span>, n_real <span class="op">=</span> <span class="va">n_real</span>, e <span class="op">=</span> <span class="va">e</span>, p_est <span class="op">=</span> <span class="va">p_est</span>, N <span class="op">=</span> <span class="va">N</span><span class="op">)</span> <span class="co"># Call the function</span></span>
<span><span class="co">#&gt; With 95% confidence, the proportion in the population is between 0.208 and 0.392 </span></span>
<span><span class="co">#&gt; Your sample size: 95 </span></span>
<span><span class="co">#&gt; Needed sample size: 80 </span></span>
<span><span class="co">#&gt; Your sample size seems to be sufficient.</span></span>
<span></span>
<span><span class="co"># Output</span></span>
<span><span class="va">ic</span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>As can be seen, given that ‘p_est’ is different from ‘p_exp’ (which
had been left at the default 0.5), a smaller sample size would have been
sufficient. However, the fact of having worked relatively more tahn what
was needed translates into a lower relative width (a higher precision)
of the confidence interval. In fact, the range of the interval is 0.392
- 0.208 = 0.184, which divided by 2 is equal to 0.092, a lower value
than the one we chose as sampling error.</p>
<p>Now, let’s consider what would have happened if the result had been
as expected, that is, if p_est = p_exp = 0.5.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Confidence interval of the proportion under a Simple Random Sampling framework (with another 'p_est')</span></span>
<span></span>
<span><span class="co"># Arguments</span></span>
<span><span class="co"># Arguments</span></span>
<span><span class="va">C</span> <span class="op">&lt;-</span> <span class="fl">0.95</span> <span class="co"># Level of confidence</span></span>
<span><span class="va">n_real</span> <span class="op">&lt;-</span> <span class="fl">95</span> <span class="co"># Real sample size</span></span>
<span><span class="va">N</span> <span class="op">&lt;-</span> <span class="fl">5000</span> <span class="co"># Population size</span></span>
<span><span class="va">e</span> <span class="op">&lt;-</span> <span class="fl">0.1</span> <span class="co"># Sampling error</span></span>
<span><span class="va">p_est</span> <span class="op">&lt;-</span> <span class="fl">0.5</span> <span class="co"># New sample estimator value, coincident with the expected value</span></span>
<span></span>
<span><span class="co"># Function</span></span>
<span><span class="va">ic</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cp_srs.html">cp_srs</a></span><span class="op">(</span>C <span class="op">=</span> <span class="va">C</span>, n_real <span class="op">=</span> <span class="va">n_real</span>, e <span class="op">=</span> <span class="va">e</span>, p_est <span class="op">=</span> <span class="va">p_est</span>, N <span class="op">=</span> <span class="va">N</span><span class="op">)</span> <span class="co"># Call the function</span></span>
<span><span class="co">#&gt; With 95% confidence, the proportion in the population is between 0.4 and 0.6 </span></span>
<span><span class="co">#&gt; Your sample size: 95 </span></span>
<span><span class="co">#&gt; Needed sample size: 95 </span></span>
<span><span class="co">#&gt; Your sample size seems to be sufficient.</span></span>
<span></span>
<span><span class="co"># Output</span></span>
<span><span class="va">ic</span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>In this case, the width of the confidence interval aligns with our
sampling error of +/- 0.1, and the size of the actual sample is
sufficient.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Martin Rubione.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
